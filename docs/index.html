<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>go_guardian â€” Route Guards for GoRouter</title>
<meta name="description" content="NestJS-style declarative route guards for Flutter's GoRouter. Works with every state management approach.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
/* â”€â”€ Reset & base â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#0f1117;--bg2:#161922;--bg3:#1e2130;
  --text:#e2e4eb;--text2:#9ca3b8;--text3:#6b7280;
  --accent:#14b8a6;--accent2:#0d9488;--accent-bg:rgba(20,184,166,.08);
  --border:#2a2d3a;--code-bg:#1a1d2e;
  --font:'Inter',system-ui,sans-serif;--mono:'JetBrains Mono',monospace;
  --max:820px;--radius:10px;
}
html{scroll-behavior:smooth;font-size:16px}
body{font-family:var(--font);background:var(--bg);color:var(--text);line-height:1.7;-webkit-font-smoothing:antialiased}
a{color:var(--accent);text-decoration:none}
a:hover{text-decoration:underline}
img{max-width:100%}

/* â”€â”€ Layout â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.wrapper{max-width:var(--max);margin:0 auto;padding:0 24px}
section{padding:56px 0}
section+section{border-top:1px solid var(--border)}

/* â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
nav{position:sticky;top:0;z-index:50;background:rgba(15,17,23,.85);backdrop-filter:blur(12px);border-bottom:1px solid var(--border)}
nav .wrapper{display:flex;align-items:center;justify-content:space-between;height:56px}
nav .logo{font-weight:700;font-size:1.1rem;color:var(--text);display:flex;align-items:center;gap:8px}
nav .logo span{color:var(--accent)}
.nav-links{display:flex;gap:24px;list-style:none}
.nav-links a{color:var(--text2);font-size:.875rem;font-weight:500;transition:color .15s}
.nav-links a:hover{color:var(--accent);text-decoration:none}
.hamburger{display:none;background:none;border:none;color:var(--text);cursor:pointer}

/* â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.hero{padding:80px 0 64px;text-align:center}
.hero h1{font-size:2.8rem;font-weight:700;letter-spacing:-.02em;margin-bottom:12px}
.hero h1 span{color:var(--accent)}
.hero p{color:var(--text2);font-size:1.15rem;max-width:560px;margin:0 auto 28px}
.badges{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-bottom:32px}
.badges img{height:22px}
.hero-code{background:var(--code-bg);border:1px solid var(--border);border-radius:var(--radius);padding:20px 24px;text-align:left;max-width:600px;margin:0 auto;overflow-x:auto}
.hero-actions{display:flex;gap:12px;justify-content:center;margin-top:28px}
.btn{display:inline-flex;align-items:center;gap:6px;padding:10px 22px;border-radius:8px;font-weight:600;font-size:.9rem;transition:all .15s}
.btn-primary{background:var(--accent);color:#0f1117}
.btn-primary:hover{background:var(--accent2);text-decoration:none}
.btn-secondary{border:1px solid var(--border);color:var(--text2)}
.btn-secondary:hover{border-color:var(--accent);color:var(--accent);text-decoration:none}

/* â”€â”€ Headings â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
h2{font-size:1.65rem;font-weight:700;margin-bottom:8px;letter-spacing:-.01em}
h3{font-size:1.2rem;font-weight:600;margin:28px 0 8px;color:var(--text)}
h4{font-size:1rem;font-weight:600;margin:20px 0 6px;color:var(--text2)}
.section-sub{color:var(--text2);margin-bottom:24px;font-size:1rem}

/* â”€â”€ Code â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
code{font-family:var(--mono);font-size:.85em;background:var(--code-bg);padding:2px 6px;border-radius:4px}
pre{background:var(--code-bg);border:1px solid var(--border);border-radius:var(--radius);padding:18px 20px;overflow-x:auto;margin:16px 0;line-height:1.55}
pre code{background:none;padding:0;font-size:.82rem}

/* â”€â”€ Syntax colors (minimal) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.kw{color:#c792ea} .str{color:#c3e88d} .cm{color:#6b7280;font-style:italic}
.fn{color:#82aaff} .ty{color:#ffcb6b} .num{color:#f78c6c} .op{color:#89ddff}
.ann{color:#f78c6c}

/* â”€â”€ Tables â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
table{width:100%;border-collapse:collapse;margin:16px 0;font-size:.9rem}
th{text-align:left;padding:10px 14px;background:var(--bg3);font-weight:600;border-bottom:2px solid var(--border)}
td{padding:10px 14px;border-bottom:1px solid var(--border)}
tr:hover td{background:var(--accent-bg)}

/* â”€â”€ Cards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.card-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin:20px 0}
.card{background:var(--bg2);border:1px solid var(--border);border-radius:var(--radius);padding:20px;transition:border-color .15s}
.card:hover{border-color:var(--accent)}
.card h4{margin:0 0 6px;color:var(--text)}
.card p{color:var(--text2);font-size:.88rem;margin:0}

/* â”€â”€ Steps â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.step{display:flex;gap:16px;margin:24px 0}
.step-num{flex-shrink:0;width:32px;height:32px;border-radius:50%;background:var(--accent);color:#0f1117;font-weight:700;display:flex;align-items:center;justify-content:center;font-size:.85rem;margin-top:2px}
.step-body{flex:1}
.step-body h4{margin:0 0 4px;color:var(--text)}
.step-body p{color:var(--text2);font-size:.92rem}

/* â”€â”€ Inheritance diagram â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.diagram{background:var(--code-bg);border:1px solid var(--border);border-radius:var(--radius);padding:20px 24px;font-family:var(--mono);font-size:.8rem;line-height:1.6;overflow-x:auto;white-space:pre;color:var(--text2);margin:16px 0}
.diagram .hl{color:var(--accent);font-weight:600}

/* â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
footer{padding:40px 0;text-align:center;color:var(--text3);font-size:.82rem;border-top:1px solid var(--border)}

/* â”€â”€ Mobile â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
@media(max-width:640px){
  .hero h1{font-size:2rem}
  .hero p{font-size:1rem}
  .nav-links{display:none;position:absolute;top:56px;left:0;right:0;flex-direction:column;background:var(--bg);border-bottom:1px solid var(--border);padding:16px 24px;gap:14px}
  .nav-links.open{display:flex}
  .hamburger{display:block}
  section{padding:40px 0}
}
</style>
</head>
<body>

<!-- â”€â”€ Nav â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<nav>
<div class="wrapper">
  <a href="#" class="logo">ğŸ›¡ï¸ <span>go_guardian</span></a>
  <button class="hamburger" onclick="document.querySelector('.nav-links').classList.toggle('open')" aria-label="Menu">
    <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
  </button>
  <ul class="nav-links">
    <li><a href="#overview">Overview</a></li>
    <li><a href="#guards">Guards</a></li>
    <li><a href="#api">API</a></li>
    <li><a href="#state">State Mgmt</a></li>
    <li><a href="#advanced">Advanced</a></li>
    <li><a href="#testing">Testing</a></li>
    <li><a href="https://github.com/vipinvkmenon/go_guardian">GitHub</a></li>
  </ul>
</div>
</nav>

<!-- â”€â”€ Hero â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<header class="hero">
<div class="wrapper">
  <h1>Route guards for <span>GoRouter</span></h1>
  <p>Declarative, composable, state-management agnostic. Protect routes the way NestJS protects endpoints.</p>
  <div class="hero-code">
<pre><code><span class="ty">GuardedRoute</span>(
  path: <span class="str">'/dashboard'</span>,
  guards: [<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => auth.isLoggedIn)],
  builder: (_, __) => <span class="ty">DashboardScreen</span>(),
)</code></pre>
  </div>
  <div class="hero-actions">
    <a href="#overview" class="btn btn-primary">Get started</a>
    <a href="https://pub.dev/packages/go_guardian" class="btn btn-secondary">pub.dev</a>
  </div>
</div>
</header>

<!-- â”€â”€ Overview â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="overview">
<div class="wrapper">
  <h2>30-second overview</h2>
  <p class="section-sub">Go from zero to guarded routes in five steps.</p>

  <div class="step">
    <div class="step-num">1</div>
    <div class="step-body">
      <h4>Install</h4>
      <pre><code>flutter pub add go_guardian</code></pre>
      <p style="margin-top:8px;font-size:0.9em;color:#94a3b8;">One import gives you everything &mdash; <code>go_guardian</code> re-exports <code>go_router</code>.</p>
    </div>
  </div>

  <div class="step">
    <div class="step-num">2</div>
    <div class="step-body">
      <h4>Pick a guard</h4>
      <p>Four are built-in. Or write your own by extending <code>RouteGuard</code>.</p>
      <table>
        <thead><tr><th>Guard</th><th>Checks</th><th>Default redirect</th></tr></thead>
        <tbody>
          <tr><td><code>AuthGuard</code></td><td>Is the user logged in?</td><td><code>/login</code></td></tr>
          <tr><td><code>RoleGuard</code></td><td>Required role present?</td><td><code>/unauthorized</code></td></tr>
          <tr><td><code>OnboardingGuard</code></td><td>Onboarding completed?</td><td><code>/onboarding</code></td></tr>
          <tr><td><code>MaintenanceGuard</code></td><td>Is the app in maintenance?</td><td><code>/maintenance</code></td></tr>
        </tbody>
      </table>
    </div>
  </div>

  <div class="step">
    <div class="step-num">3</div>
    <div class="step-body">
      <h4>Attach to a route</h4>
<pre><code><span class="ty">GuardedRoute</span>(
  path: <span class="str">'/admin'</span>,
  guards: [<span class="ty">RoleGuard</span>.<span class="fn">stateless</span>(hasRole: (roles) => user.hasAny(roles))],
  guardMeta: <span class="kw">const</span> <span class="ty">GuardMeta</span>({<span class="str">'roles'</span>: [<span class="str">'admin'</span>]}),
  builder: (_, __) => <span class="ty">AdminScreen</span>(),
)</code></pre>
    </div>
  </div>

  <div class="step">
    <div class="step-num">4</div>
    <div class="step-body">
      <h4>Inherit through shells</h4>
      <p>Guards on a <code>GuardedShellRoute</code> automatically protect every child route.</p>
<pre><code><span class="ty">GuardedShellRoute</span>(
  guards: [<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => auth.isLoggedIn)],
  builder: (ctx, state, child) => <span class="ty">AppShell</span>(child: child),
  routes: [
    <span class="ty">GuardedRoute</span>(path: <span class="str">'/home'</span>, ...),    <span class="cm">// inherits AuthGuard</span>
    <span class="ty">GuardedRoute</span>(path: <span class="str">'/profile'</span>, ...), <span class="cm">// inherits AuthGuard</span>
  ],
)</code></pre>
    </div>
  </div>

  <div class="step">
    <div class="step-num">5</div>
    <div class="step-body">
      <h4>Add reactive refresh</h4>
      <p>When state changes, GoRouter re-runs all guards automatically.</p>
<pre><code><span class="ty">GoRouter</span>(
  refreshListenable: <span class="ty">GuardRefreshNotifier</span>.<span class="fn">from</span>([authNotifier, configNotifier]),
  routes: [ ... ],
)</code></pre>
    </div>
  </div>
</div>
</section>

<!-- â”€â”€ Built-in Guards â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="guards">
<div class="wrapper">
  <h2>Built-in guards</h2>
  <p class="section-sub">Each guard has a context-aware constructor and a <code>.stateless()</code> variant.</p>

  <div class="card-grid">
    <div class="card">
      <h4>AuthGuard</h4>
      <p>Checks login status. Optionally preserves the deep link as <code>?continue=</code> so you can redirect back after login.</p>
    </div>
    <div class="card">
      <h4>RoleGuard</h4>
      <p>Reads required roles from <code>GuardMeta</code> and checks if the user has at least one. Perfect for admin panels.</p>
    </div>
    <div class="card">
      <h4>OnboardingGuard</h4>
      <p>Ensures the user has finished onboarding before accessing the app. Priority 30 â€” runs after auth.</p>
    </div>
    <div class="card">
      <h4>MaintenanceGuard</h4>
      <p>Priority -10 â€” runs before everything. Blocks all protected routes when your app is under maintenance.</p>
    </div>
  </div>

  <h3>Guard priorities</h3>
  <p>Guards run in priority order (lowest first). Built-in priorities:</p>
  <pre><code>MaintenanceGuard  <span class="num">-10</span>   <span class="cm">// first â€” blocks everything</span>
AuthGuard          <span class="num">10</span>   <span class="cm">// must be logged in</span>
RoleGuard          <span class="num">20</span>   <span class="cm">// must have the right role</span>
OnboardingGuard    <span class="num">30</span>   <span class="cm">// must have onboarded</span></code></pre>

  <h3>Guard inheritance diagram</h3>
  <div class="diagram"><span class="hl">GuardedShellRoute</span> [MaintenanceGuard, AuthGuard, OnboardingGuard]
â”‚
â”œâ”€â”€ /home
â”‚   â””â”€â”€ guards: Maintenance â†’ Auth â†’ Onboarding
â”‚
â”œâ”€â”€ /admin  [<span class="hl">+RoleGuard</span>]
â”‚   â””â”€â”€ guards: Maintenance â†’ Auth â†’ Onboarding â†’ <span class="hl">Role(admin)</span>
â”‚
â””â”€â”€ /settings
    â””â”€â”€ guards: Maintenance â†’ Auth â†’ Onboarding</div>
</div>
</section>

<!-- â”€â”€ API Reference â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="api">
<div class="wrapper">
  <h2>API reference</h2>
  <p class="section-sub">The full public surface at a glance.</p>

  <h3>RouteGuard</h3>
  <p>The base class. Override <code>check()</code> â€” return <code>null</code> to allow, or a redirect path to deny.</p>
<pre><code><span class="kw">abstract class</span> <span class="ty">RouteGuard</span> {
  <span class="kw">int get</span> priority => <span class="num">0</span>;

  <span class="ty">FutureOr</span>&lt;<span class="ty">String</span>?> <span class="fn">check</span>(<span class="ty">BuildContext</span> ctx, <span class="ty">GoRouterState</span> state, <span class="ty">GuardMeta</span> meta);
}</code></pre>

  <h3>GuardedRoute</h3>
  <p>A <code>GoRoute</code> with <code>guards</code> and <code>guardMeta</code>:</p>
<pre><code><span class="ty">GuardedRoute</span>(
  path: <span class="str">'/settings'</span>,
  guards: [<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => auth.isLoggedIn)],
  guardMeta: <span class="ty">GuardMeta</span>({<span class="str">'roles'</span>: [<span class="str">'admin'</span>]}),
  existingRedirect: myOldRedirect, <span class="cm">// optional â€” runs after guards pass</span>
  builder: (_, __) => <span class="ty">SettingsScreen</span>(),
)</code></pre>

  <h3>GuardedShellRoute</h3>
  <p>A <code>ShellRoute</code> whose guards are inherited by all children:</p>
<pre><code><span class="ty">GuardedShellRoute</span>(
  guards: [<span class="ty">AuthGuard</span>(...)],
  builder: (ctx, state, child) => <span class="ty">AppShell</span>(child: child),
  routes: [ <span class="cm">/* children inherit guards */</span> ],
)</code></pre>

  <h3>DiscardedRoute</h3>
  <p>The inverse of <code>GuardedRoute</code> â€” redirects <em>away</em> when a condition <em>is</em> met:</p>
<pre><code><span class="ty">DiscardedRoute</span>.<span class="fn">stateless</span>(
  path: <span class="str">'/login'</span>,
  discardWhen: () => auth.isLoggedIn,
  redirectTo: <span class="str">'/home'</span>,
  builder: (_, __) => <span class="ty">LoginScreen</span>(),
)</code></pre>

  <h3>GuardMeta</h3>
  <p>Typed metadata passed to guards per-route:</p>
<pre><code><span class="kw">const</span> meta = <span class="ty">GuardMeta</span>({<span class="str">'roles'</span>: [<span class="str">'admin'</span>], <span class="str">'minLevel'</span>: <span class="num">5</span>});
meta.<span class="fn">get</span>&lt;<span class="ty">List</span>>(<span class="str">'roles'</span>);         <span class="cm">// ['admin']</span>
meta.<span class="fn">getOrDefault</span>(<span class="str">'minLevel'</span>, <span class="num">1</span>); <span class="cm">// 5</span>
meta.<span class="fn">has</span>(<span class="str">'roles'</span>);               <span class="cm">// true</span>
metaA.<span class="fn">merge</span>(metaB);              <span class="cm">// right side wins</span></code></pre>

  <h3>GuardChain</h3>
  <p>Compose guards with existing redirect logic for brownfield migration:</p>
<pre><code><span class="cm">// Existing redirect runs first</span>
redirect: <span class="ty">GuardChain</span>.<span class="fn">existing</span>(myOldRedirect)
  .<span class="fn">then</span>(<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => auth.isLoggedIn))
  .<span class="fn">existingWins</span>()

<span class="cm">// Guards run first</span>
  .<span class="fn">guardsWin</span>()

<span class="cm">// Guards only (greenfield)</span>
redirect: <span class="ty">GuardChain</span>.<span class="fn">guards</span>([<span class="ty">AuthGuard</span>(...), <span class="ty">RoleGuard</span>(...)]).build()</code></pre>

  <h3>GuardRefreshNotifier</h3>
  <p>Merge multiple listenables and streams into one <code>refreshListenable</code>:</p>
<pre><code><span class="cm">// ChangeNotifiers</span>
<span class="ty">GuardRefreshNotifier</span>.<span class="fn">from</span>([authNotifier, themeNotifier])

<span class="cm">// Bloc streams</span>
<span class="ty">GuardRefreshNotifier</span>.<span class="fn">fromStreams</span>([authBloc.stream])

<span class="cm">// Mixed</span>
<span class="ty">GuardRefreshNotifier</span>(listenables: [authNotifier], streams: [flagStream])</code></pre>

  <h3>Guard composition operators</h3>
  <p>Combine guards with <code>&amp;</code> (AND), <code>|</code> (OR), and <code>~</code> (NOT):</p>
<pre><code>guards: [<span class="ty">AuthGuard</span>(...) <span class="op">&</span> (<span class="ty">PremiumGuard</span>(...) <span class="op">|</span> <span class="ty">TrialGuard</span>(...))]
guards: [<span class="op">~</span><span class="ty">MaintenanceGuard</span>(...)] <span class="cm">// inverts the guard</span></code></pre>
</div>
</section>

<!-- â”€â”€ State management â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="state">
<div class="wrapper">
  <h2>Works with every state management</h2>
  <p class="section-sub">All built-in guards have a <code>.stateless()</code> constructor that takes a plain <code>bool Function()</code>.</p>

<pre><code><span class="cm">// Provider / Bloc â€” uses BuildContext</span>
<span class="ty">AuthGuard</span>(isAuthenticated: (ctx) => ctx.read&lt;<span class="ty">AuthService</span>>().isLoggedIn)

<span class="cm">// Riverpod â€” uses ref captured in closure</span>
<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => ref.read(authProvider).isLoggedIn)

<span class="cm">// GetX</span>
<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => Get.find&lt;<span class="ty">AuthCtrl</span>>().isLoggedIn)

<span class="cm">// Signals</span>
<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => isLoggedIn.value)

<span class="cm">// Singleton</span>
<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => <span class="ty">AuthService</span>.instance.isLoggedIn)</code></pre>

  <p>The same dual-constructor pattern applies to <code>RoleGuard</code>, <code>OnboardingGuard</code>, <code>MaintenanceGuard</code>, and <code>DiscardedRoute</code>.</p>
</div>
</section>

<!-- â”€â”€ Advanced â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="advanced">
<div class="wrapper">
  <h2>Advanced topics</h2>

  <h3>Custom guards</h3>
  <p>Extend <code>RouteGuard</code> and implement <code>check()</code>:</p>
<pre><code><span class="kw">class</span> <span class="ty">SubscriptionGuard</span> <span class="kw">extends</span> <span class="ty">RouteGuard</span> {
  <span class="ann">@override</span>
  <span class="kw">int get</span> priority => <span class="num">15</span>;

  <span class="ann">@override</span>
  <span class="ty">FutureOr</span>&lt;<span class="ty">String</span>?> <span class="fn">check</span>(<span class="ty">BuildContext</span> ctx, <span class="ty">GoRouterState</span> state, <span class="ty">GuardMeta</span> meta) {
    <span class="kw">if</span> (hasActiveSubscription) <span class="kw">return null</span>;
    <span class="kw">return</span> <span class="str">'/subscribe'</span>;
  }
}</code></pre>

  <p>Guards can also be async â€” just return <code>Future&lt;String?></code>:</p>
<pre><code><span class="ann">@override</span>
<span class="ty">FutureOr</span>&lt;<span class="ty">String</span>?> <span class="fn">check</span>(<span class="ty">BuildContext</span> ctx, <span class="ty">GoRouterState</span> state, <span class="ty">GuardMeta</span> meta) <span class="kw">async</span> {
  <span class="kw">final</span> flags = <span class="kw">await</span> fetchFlags();
  <span class="kw">if</span> (flags.isEnabled(<span class="str">'new_dashboard'</span>)) <span class="kw">return null</span>;
  <span class="kw">return</span> <span class="str">'/coming-soon'</span>;
}</code></pre>

  <h3>Brownfield migration</h3>
  <p>Already using <code>redirect:</code>? Migrate incrementally:</p>

  <div class="step">
    <div class="step-num">1</div>
    <div class="step-body">
      <h4>Wrap your existing redirect</h4>
<pre><code><span class="cm">// Before</span>
<span class="ty">GoRoute</span>(path: <span class="str">'/dashboard'</span>, redirect: myRedirect, ...)

<span class="cm">// After â€” zero behavior change</span>
<span class="ty">GoRoute</span>(path: <span class="str">'/dashboard'</span>, redirect: <span class="ty">GuardChain</span>.<span class="fn">existing</span>(myRedirect).<span class="fn">build</span>(), ...)</code></pre>
    </div>
  </div>
  <div class="step">
    <div class="step-num">2</div>
    <div class="step-body">
      <h4>Add guards alongside</h4>
<pre><code>redirect: <span class="ty">GuardChain</span>.<span class="fn">existing</span>(myRedirect)
  .<span class="fn">then</span>(<span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => auth.isLoggedIn))
  .<span class="fn">existingWins</span>()</code></pre>
    </div>
  </div>
  <div class="step">
    <div class="step-num">3</div>
    <div class="step-body">
      <h4>Switch to guards-first when ready</h4>
      <p>Swap <code>.existingWins()</code> for <code>.guardsWin()</code>, then eventually drop the old redirect entirely.</p>
    </div>
  </div>

  <h3>Debugging</h3>
  <p>Enable the built-in debug observer to see every guard evaluation in the console:</p>
<pre><code><span class="kw">if</span> (kDebugMode) <span class="ty">GoGuardian</span>.observer = <span class="ty">DebugGuardObserver</span>();</code></pre>
  <p>Example output:</p>
<pre><code><span class="cm">[GoGuardian] GuardEvaluationStarted(route: /admin, guards: 2)
[GoGuardian] GuardCheckCompleted(guard: AuthGuard, result: allow, 0ms)
[GoGuardian] GuardCheckCompleted(guard: RoleGuard, result: redirect, 1ms)
[GoGuardian] GuardChainCompleted(route: /admin, result: redirect(/unauthorized), 1ms)</span></code></pre>
  <p>Implement <code>GuardObserver</code> for custom analytics.</p>
</div>
</section>

<!-- â”€â”€ Testing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="testing">
<div class="wrapper">
  <h2>Testing</h2>
  <p class="section-sub">Unit-test guards without a widget tree using <code>GuardTestHarness</code>.</p>

<pre><code><span class="fn">test</span>(<span class="str">'AuthGuard allows authenticated users'</span>, () <span class="kw">async</span> {
  <span class="kw">final</span> guard = <span class="ty">AuthGuard</span>.<span class="fn">stateless</span>(isAuthenticated: () => <span class="kw">true</span>);
  <span class="kw">final</span> harness = <span class="ty">GuardTestHarness</span>();
  <span class="kw">final</span> result = <span class="kw">await</span> harness.<span class="fn">check</span>(guard);
  <span class="fn">expect</span>(result, isNull); <span class="cm">// null = allowed</span>
});

<span class="fn">test</span>(<span class="str">'RoleGuard reads metadata'</span>, () <span class="kw">async</span> {
  <span class="kw">final</span> guard = <span class="ty">RoleGuard</span>.<span class="fn">stateless</span>(hasRole: (roles) => roles.contains(<span class="str">'admin'</span>));
  <span class="kw">final</span> harness = <span class="ty">GuardTestHarness</span>(
    meta: <span class="ty">GuardMeta</span>({<span class="str">'roles'</span>: [<span class="str">'admin'</span>]}),
  );
  <span class="kw">final</span> result = <span class="kw">await</span> harness.<span class="fn">check</span>(guard);
  <span class="fn">expect</span>(result, isNull);
});

<span class="fn">test</span>(<span class="str">'multiple guards in priority order'</span>, () <span class="kw">async</span> {
  <span class="kw">final</span> harness = <span class="ty">GuardTestHarness</span>(meta: <span class="ty">GuardMeta</span>({<span class="str">'roles'</span>: [<span class="str">'admin'</span>]}));
  <span class="kw">final</span> result = <span class="kw">await</span> harness.<span class="fn">checkAll</span>([authGuard, roleGuard]);
  <span class="fn">expect</span>(result, isNull); <span class="cm">// both pass</span>
});</code></pre>

  <h3>Builder methods</h3>
<pre><code><span class="kw">final</span> harness = <span class="ty">GuardTestHarness</span>()
  .<span class="fn">withPath</span>(<span class="str">'/admin/users'</span>)
  .<span class="fn">withMeta</span>(<span class="ty">GuardMeta</span>({<span class="str">'roles'</span>: [<span class="str">'admin'</span>]}))
  .<span class="fn">withQueryParams</span>({<span class="str">'tab'</span>: <span class="str">'settings'</span>});</code></pre>
</div>
</section>

<!-- â”€â”€ Example â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<section id="example">
<div class="wrapper">
  <h2>Example app</h2>
  <p class="section-sub">A runnable Flutter app demonstrating every feature. Split into four clean files:</p>
  <table>
    <thead><tr><th>File</th><th>Purpose</th></tr></thead>
    <tbody>
      <tr><td><code>main.dart</code></td><td>App entry and debug observer</td></tr>
      <tr><td><code>src/services.dart</code></td><td>AuthService and AppConfig singletons</td></tr>
      <tr><td><code>src/router.dart</code></td><td>GoRouter with guards and DiscardedRoute</td></tr>
      <tr><td><code>src/screens.dart</code></td><td>All UI screens</td></tr>
    </tbody>
  </table>
  <p style="margin-top:16px">
    <a href="https://github.com/vipinvkmenon/go_guardian/tree/main/example" class="btn btn-secondary">View on GitHub</a>
  </p>
</div>
</section>

<!-- â”€â”€ Footer â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ -->
<footer>
<div class="wrapper">
  <p>go_guardian &middot; MIT License &middot; Built with Flutter & GoRouter</p>
</div>
</footer>

</body>
</html>
